<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.17.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MATE Desktop Environment: bell.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mate-logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">MATE Desktop Environment
   </div>
   <div id="projectbrief">The continuation of GNOME 2. An intuitive and attractive desktop for Linux and Unix-like operating systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.17.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav-mobile">
<div class="sm sm-dox"><input id="main-menu-state" type="checkbox"/>
<label class="main-menu-btn" for="main-menu-state">
<span class="main-menu-btn-icon"></span> Toggle main menu visibility</label>
<span id="searchBoxPos1" style="position:absolute;right:8px;top:8px;height:36px;"></span>
</div>
</div><!-- main-nav-mobile -->
<div id="main-nav">
  <ul class="sm sm-dox" id="main-menu">
    <li id="searchBoxPos2" style="float:right">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
    </li>
  </ul>
</div><!-- main-nav -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('bell_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">bell.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;config.h&gt;</code><br />
<code>#include &lt;glib/gi18n-lib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="bell_8h_source.html">bell.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="screen-private_8h_source.html">screen-private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="prefs_8h_source.html">prefs.h</a>&quot;</code><br />
<code>#include &lt;canberra-gtk.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bell.c:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" loading="lazy" frameborder="0" src="bell_8c__incl.svg" width="100%" height="492"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div>
<p><a href="bell_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab76c87a098b949b49b1d703862ab07ea" id="r_ab76c87a098b949b49b1d703862ab07ea"><td class="memItemLeft">void&#160;</td><td class="memItemRight"><a class="el" href="#ab76c87a098b949b49b1d703862ab07ea">meta_bell_set_audible</a> (<a class="el" href="types_8h.html#ae50e85fc87a845eeb59e09c5fcfb02ed">MetaDisplay</a> *display, gboolean audible)</td></tr>
<tr class="memitem:aa185d7edc2fb3f01acc58b904e8a8c9c" id="r_aa185d7edc2fb3f01acc58b904e8a8c9c"><td class="memItemLeft">gboolean&#160;</td><td class="memItemRight"><a class="el" href="#aa185d7edc2fb3f01acc58b904e8a8c9c">meta_bell_init</a> (<a class="el" href="types_8h.html#ae50e85fc87a845eeb59e09c5fcfb02ed">MetaDisplay</a> *display)</td></tr>
<tr class="memitem:a48da292bb53c1a3bdea7421aca14c792" id="r_a48da292bb53c1a3bdea7421aca14c792"><td class="memItemLeft">void&#160;</td><td class="memItemRight"><a class="el" href="#a48da292bb53c1a3bdea7421aca14c792">meta_bell_shutdown</a> (<a class="el" href="types_8h.html#ae50e85fc87a845eeb59e09c5fcfb02ed">MetaDisplay</a> *display)</td></tr>
<tr class="memitem:a38910005009e3062c7cb62f62f8e12d4" id="r_a38910005009e3062c7cb62f62f8e12d4"><td class="memItemLeft">void&#160;</td><td class="memItemRight"><a class="el" href="#a38910005009e3062c7cb62f62f8e12d4">meta_bell_notify_frame_destroy</a> (<a class="el" href="types_8h.html#a5b3c776c5048a1771fa97fee70863af9">MetaFrame</a> *frame)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Ring the bell or flash the screen</p>
<p>Sometimes, X programs "ring the bell", whatever that means. Marco lets the user configure the bell to be audible or visible (aka visual), and if it's visual it can be configured to be frame-flash or fullscreen-flash. We never get told about audible bells; X handles them just fine by itself.</p>
<p>Visual bells come in at meta_bell_notify(), which checks we are actually in visual mode and calls through to bell_visual_notify(). That function then checks what kind of visual flash you like, and calls either bell_flash_fullscreen()&ndash; which calls bell_flash_screen() to do its work&ndash; or bell_flash_frame(), which flashes the focussed window using bell_flash_window_frame(), unless there is no such window, in which case it flashes the screen instead. bell_flash_window_frame() flashes the frame and calls bell_unflash_frame() as a timeout to remove the flash.</p>
<p>The visual bell was the result of a discussion in Bugzilla here: <a href="http://bugzilla.gnome.org/show_bug.cgi?id=99886">http://bugzilla.gnome.org/show_bug.cgi?id=99886</a>.</p>
<p>Several of the functions in this file are ifdeffed out entirely if we are found not to have the XKB extension, which is required to do these clever things with bells; some others are entirely no-ops in that case. </p>

<p class="definition">Definition in file <a class="el" href="bell_8c_source.html">bell.c</a>.</p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="aa185d7edc2fb3f01acc58b904e8a8c9c" name="aa185d7edc2fb3f01acc58b904e8a8c9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa185d7edc2fb3f01acc58b904e8a8c9c">&#9670;&#160;</a></span>meta_bell_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gboolean meta_bell_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#ae50e85fc87a845eeb59e09c5fcfb02ed">MetaDisplay</a> *</td>          <td class="paramname"><span class="paramname"><em>display</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialises the bell subsystem. This involves intialising XKB (which, despite being a keyboard extension, is the place to look for bell notifications), then asking it to send us bell notifications, and then also switching off the audible bell if we're using a visual one ourselves.</p>
<p>Unlike most X extensions we use, we only initialise XKB here (rather than in <a class="el" href="testboxes_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>). It's possible that XKB is not installed at all, but if that was known at build time we will have HAVE_XKB undefined, which will cause this function to be a no-op.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">display</td><td>The display which is opening</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bell_8c_source.html#l00373">373</a> of file <a class="el" href="bell_8c_source.html">bell.c</a>.</p>

<p class="reference">References <a class="el" href="afmparse_8h_source.html#l00086">FALSE</a>, <a class="el" href="nl80211_8h_source.html#l00000">mask</a>, <a class="el" href="async-getprop_8c_source.html#l00044">NULL</a>, <a class="el" href="afmparse_8h_source.html#l00085">TRUE</a>, and <a class="el" href="display-private_8h_source.html#l00082">_MetaDisplay::xdisplay</a>.</p>

</div>
</div>
<a id="a38910005009e3062c7cb62f62f8e12d4" name="a38910005009e3062c7cb62f62f8e12d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38910005009e3062c7cb62f62f8e12d4">&#9670;&#160;</a></span>meta_bell_notify_frame_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void meta_bell_notify_frame_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5b3c776c5048a1771fa97fee70863af9">MetaFrame</a> *</td>          <td class="paramname"><span class="paramname"><em>frame</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deals with a frame being destroyed. This is important because if we're using a visual bell, we might be flashing the edges of the frame, and so we'd have a timeout function waiting ready to un-flash them. If the frame's going away, we can tell the timeout not to bother.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frame</td><td>The frame which is being destroyed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bell_8c_source.html#l00433">433</a> of file <a class="el" href="bell_8c_source.html">bell.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="frame_8c_source.html#l00169">meta_window_destroy_frame()</a>.</p>

</div>
</div>
<a id="ab76c87a098b949b49b1d703862ab07ea" name="ab76c87a098b949b49b1d703862ab07ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab76c87a098b949b49b1d703862ab07ea">&#9670;&#160;</a></span>meta_bell_set_audible()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void meta_bell_set_audible </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#ae50e85fc87a845eeb59e09c5fcfb02ed">MetaDisplay</a> *</td>          <td class="paramname"><span class="paramname"><em>display</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gboolean</td>          <td class="paramname"><span class="paramname"><em>audible</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flashes one screen, or all screens, in response to a bell event. If the event is on a particular window, flash the screen that window is on. Otherwise, flash every screen on this display.</p>
<p>If the configure script found we had no XKB, this does not exist.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">display</td><td>The display the event came in on </td></tr>
    <tr><td class="paramname">xkb_ev</td><td>The bell event </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bell_8c_source.html#l00368">368</a> of file <a class="el" href="bell_8c_source.html">bell.c</a>.</p>

</div>
</div>
<a id="a48da292bb53c1a3bdea7421aca14c792" name="a48da292bb53c1a3bdea7421aca14c792"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48da292bb53c1a3bdea7421aca14c792">&#9670;&#160;</a></span>meta_bell_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void meta_bell_shutdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#ae50e85fc87a845eeb59e09c5fcfb02ed">MetaDisplay</a> *</td>          <td class="paramname"><span class="paramname"><em>display</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Shuts down the bell subsystem.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">display</td><td>The display which is closing</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bell_8c_source.html#l00413">413</a> of file <a class="el" href="bell_8c_source.html">bell.c</a>.</p>

<p class="reference">References <a class="el" href="display-private_8h_source.html#l00082">_MetaDisplay::xdisplay</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_c51f31fdc44256341e0cc2776a36006a.html">marco</a></li><li class="navelem"><a href="dir_6e74a58a7363abbd3bf6d35e24c6fd1b.html">src</a></li><li class="navelem"><a href="dir_9eb37c0b774108a9eed61206e4c02363.html">core</a></li><li class="navelem"><a href="bell_8c.html">bell.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.17.0 </li>
  </ul>
</div>
</body>
</html>
